
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Contributing &#8212; dascore 0.0.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/nature.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">dascore 0.0.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Contributing</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <p>#%% md</p>
<section id="Contributing">
<h1>Contributing<a class="headerlink" href="#Contributing" title="Permalink to this headline">¶</a></h1>
<p>Contributions to dascore are welcomed and appreciated. Before proceeding please be aware of our <a href="#id1"><span class="problematic" id="id2">`code of conduct &lt;&gt;`__</span></a>.</p>
<section id="Getting-setup">
<h2>Getting setup<a class="headerlink" href="#Getting-setup" title="Permalink to this headline">¶</a></h2>
<p>The following steps are needed to setup <code class="docutils literal notranslate"><span class="pre">dascore</span></code> for development:</p>
<section id="1.-Clone-dascore">
<h3>1. Clone dascore<a class="headerlink" href="#1.-Clone-dascore" title="Permalink to this headline">¶</a></h3>
<!--pytest-codeblocks:skip--><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/dasdae/dascore
<span class="nb">cd</span> dascore
</pre></div>
</div>
</section>
<section id="2.-Pull-tags">
<h3>2. Pull tags<a class="headerlink" href="#2.-Pull-tags" title="Permalink to this headline">¶</a></h3>
<p>Make sure to pull all of the latest git tags.</p>
<p><strong>NOTE:</strong> You may need to do this periodically to keep tags in sync.</p>
<!--pytest-codeblocks:skip--><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git pull origin master --tags
</pre></div>
</div>
</section>
<section id="3.-Create-a-virtual-environment-(optional)">
<h3>3. Create a virtual environment (optional)<a class="headerlink" href="#3.-Create-a-virtual-environment-(optional)" title="Permalink to this headline">¶</a></h3>
<p>Create and activate a virtual environment so dascore will not mess with the base (or system) python installation.</p>
<p>If you are using <a class="reference external" href="https://www.anaconda.com/">Anaconda</a>, simply use the environment provided:</p>
<!--pytest-codeblocks:skip--><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda env create -f environment.yml
conda activate dascore
</pre></div>
</div>
</section>
<section id="4.-Install-dascore-in-development-mode">
<h3>4. Install dascore in development mode<a class="headerlink" href="#4.-Install-dascore-in-development-mode" title="Permalink to this headline">¶</a></h3>
<!--pytest-codeblocks:skip--><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install -e .<span class="o">[</span>test,docs<span class="o">]</span>
</pre></div>
</div>
</section>
<section id="5.-Setup-pre-commit-hooks">
<h3>5. Setup pre-commit hooks<a class="headerlink" href="#5.-Setup-pre-commit-hooks" title="Permalink to this headline">¶</a></h3>
<p>dascore uses several <a class="reference external" href="https://pre-commit.com/">pre-commit</a> hooks to ensure the code stays tidy. Please install and use them!</p>
<!--pytest-codeblocks:skip--><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pre-commit install -f
</pre></div>
</div>
</section>
</section>
<section id="Branching-and-versioning">
<h2>Branching and versioning<a class="headerlink" href="#Branching-and-versioning" title="Permalink to this headline">¶</a></h2>
<p>We create new features or bug fixes in their own branches and merge them into master via pull requests. We may switch to a more complex branching model if the need arises.</p>
<p>If substantial new features have been added since the last release we will bump the minor version. If only bug fixes/minor changes have been made, only the patch version will be bumped. Like most python projects, we loosely follow <a class="reference external" href="https://semver.org/">semantic versioning</a> in terms that we will not bump the major version until dascore is more stable.</p>
</section>
<section id="Running-the-tests">
<h2>Running the tests<a class="headerlink" href="#Running-the-tests" title="Permalink to this headline">¶</a></h2>
<p>The tests suite is run with <a class="reference external" href="https://docs.pytest.org/en/stable/">pytest</a>. While in the base dascore repo (and after installing dascore) invoke pytest from the command line:</p>
<!--pytest-codeblocks:skip--><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest tests
</pre></div>
</div>
<p>You can also check coverage</p>
<!--pytest-codeblocks:skip--><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest tests --cov dascore --cov-report term-missing
</pre></div>
</div>
</section>
<section id="Writing-Tests">
<h2>Writing Tests<a class="headerlink" href="#Writing-Tests" title="Permalink to this headline">¶</a></h2>
<p>Tests should go into the Tests/ folder, which mirrors the structure of the main package.</p>
<p>In general, tests should be grouped together in classes. Fixtures go as close as possible to the test(s) that need them, going from class, module, and conftest fixtures. Checkout the pytest documentation for a <a class="reference external" href="https://docs.pytest.org/en/6.2.x/fixture.html">review on fixtures</a> (and why to use them).</p>
</section>
<section id="Building-the-documentation">
<h2>Building the documentation<a class="headerlink" href="#Building-the-documentation" title="Permalink to this headline">¶</a></h2>
<p>The documentation can be built using the script called “make_docs.py” in the scripts directory. If you have followed the instructions above all the required dependencies should be installed. You will also need to install <code class="docutils literal notranslate"><span class="pre">pandoc</span></code> using conda or the <a class="reference external" href="https://pandoc.org/installing.html">offical installation</a>.</p>
<!--pytest-codeblocks:skip--><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python scripts/make_docs.py
</pre></div>
</div>
<p>The docs can then be accessed by double-clicking on the newly created html index at docs/_build/html/index.html.</p>
</section>
<section id="Contributing-to-the-documentation">
<h2>Contributing to the documentation<a class="headerlink" href="#Contributing-to-the-documentation" title="Permalink to this headline">¶</a></h2>
<p>The documentation is primarily done in markdown but easily converted to jupyter notebooks using <a class="reference external" href="https://github.com/mwouts/jupytext">jupytext</a>. Feel free to make changes to the markdown then build with the following steps:</p>
</section>
<section id="General-guidelines">
<h2>General guidelines<a class="headerlink" href="#General-guidelines" title="Permalink to this headline">¶</a></h2>
<p>dascore uses <a class="reference external" href="https://github.com/ambv/black">Black</a> and <a class="reference external" href="http://flake8.pycqa.org/en/latest/">flake8</a> for code linting. If you have properly installed dascore’ pre-commit hooks they will be invoked automatically when you make a git commit. If any complaints are raised simply address them and try again.</p>
<p>Use <a class="reference external" href="https://docs.scipy.org/doc/numpy/docs/howto_document.html">numpy style docstrings</a>. All public code (doesn’t start with a <code class="docutils literal notranslate"><span class="pre">_</span></code>) should have a “full” docstring but private code (starts with a <code class="docutils literal notranslate"><span class="pre">_</span></code>) can have an abbreviated docstring.</p>
<p>dascore makes extensive use of Python 3’s <a class="reference external" href="https://docs.python.org/3/library/typing.html">type hints</a>. Use them to annotate any public functions/methods.</p>
<p>Prefer <code class="docutils literal notranslate"><span class="pre">pathlib.Path</span></code> to strings when working with paths. However, when dealing with many many files (e.g., indexers) strings may be preferred for efficiency.</p>
<section id="Example-functions">
<h3>Example functions<a class="headerlink" href="#Example-functions" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Union</span>

<span class="kn">import</span> <span class="nn">dascore</span>
<span class="kn">from</span> <span class="nn">dascore.constants</span> <span class="kn">import</span> <span class="n">PatchType</span>


<span class="c1"># example public Patch function</span>
<span class="nd">@dascore</span><span class="o">.</span><span class="n">patch_function</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">example_func</span><span class="p">(</span><span class="n">patch</span><span class="p">:</span> <span class="n">PatchType</span><span class="p">,</span> <span class="n">to_add</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">PatchType</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A simple, one line explanation of what this function does.</span>

<span class="sd">    Additional details which might be useful, and are not limited to one line.</span>
<span class="sd">    In fact, they might span several lines, especially if the author of the</span>
<span class="sd">    docstring tends to include more details than needed.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    patch</span>
<span class="sd">        A description of this parameter</span>
<span class="sd">    to_add</span>
<span class="sd">        A description of this parameter</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    If needed, more information about what this function returns. You shouldn&#39;t</span>
<span class="sd">    simply specify the type here since that is already given by the type annotation.</span>
<span class="sd">    If the returned object is self-explanatory feel free to skip this section.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; # Examples are included in the doctest style</span>
<span class="sd">    &gt;&gt;&gt; import dascore</span>
<span class="sd">    ... pa = dascore.get_example_patch()</span>
<span class="sd">    ...</span>
<span class="sd">    ... out = example_func(pa)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">data</span>
    <span class="k">if</span> <span class="n">to_add</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">+=</span> <span class="n">data</span>
    <span class="k">return</span> <span class="n">patch</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="n">patch</span><span class="o">.</span><span class="n">atts</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="n">patch</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>


<span class="c1"># example private function</span>
<span class="k">def</span> <span class="nf">_recombobulate</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A private function can have a simple (multi-line) snippet and doesn&#39;t need as</span>
<span class="sd">    much detail or type hinting as a public function.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="Working-with-dataframes">
<h2>Working with dataframes<a class="headerlink" href="#Working-with-dataframes" title="Permalink to this headline">¶</a></h2>
<p>Column names should be snake_cased whenever possible.</p>
<p>Always access columns with getitem and not getattr (ie use <code class="docutils literal notranslate"><span class="pre">df['column_name']</span></code> not <code class="docutils literal notranslate"><span class="pre">df.column_name</span></code>).</p>
<p>Prefer creating a new <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>/<code class="docutils literal notranslate"><span class="pre">Series</span></code> to modifying them inplace. Inplace modifications should require opting in (usually through an <code class="docutils literal notranslate"><span class="pre">inplace</span></code> key word argument).</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Contributing</a><ul>
<li><a class="reference internal" href="#Getting-setup">Getting setup</a><ul>
<li><a class="reference internal" href="#1.-Clone-dascore">1. Clone dascore</a></li>
<li><a class="reference internal" href="#2.-Pull-tags">2. Pull tags</a></li>
<li><a class="reference internal" href="#3.-Create-a-virtual-environment-(optional)">3. Create a virtual environment (optional)</a></li>
<li><a class="reference internal" href="#4.-Install-dascore-in-development-mode">4. Install dascore in development mode</a></li>
<li><a class="reference internal" href="#5.-Setup-pre-commit-hooks">5. Setup pre-commit hooks</a></li>
</ul>
</li>
<li><a class="reference internal" href="#Branching-and-versioning">Branching and versioning</a></li>
<li><a class="reference internal" href="#Running-the-tests">Running the tests</a></li>
<li><a class="reference internal" href="#Writing-Tests">Writing Tests</a></li>
<li><a class="reference internal" href="#Building-the-documentation">Building the documentation</a></li>
<li><a class="reference internal" href="#Contributing-to-the-documentation">Contributing to the documentation</a></li>
<li><a class="reference internal" href="#General-guidelines">General guidelines</a><ul>
<li><a class="reference internal" href="#Example-functions">Example functions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#Working-with-dataframes">Working with dataframes</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/markdown/contributing.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">dascore 0.0.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Contributing</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2022, DASDAE Development Team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.3.2.
    </div>
  </body>
</html>